(this["webpackJsonpreact-gomoku"]=this["webpackJsonpreact-gomoku"]||[]).push([[0],{10:function(e,t,r){e.exports={Board:"Board_Board__3vYMo",Tiles:"Board_Tiles__1R0S7"}},17:function(e,t,r){},18:function(e,t,r){},26:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(6),c=r.n(o),i=(r(17),r(18),r(1));var u=function(e){return Object(i.jsx)("div",{className:"Title",children:e.title})},s=r(5),l=r(2),d={mode:"GAME",tiles:Array.from({length:19},(function(){return Array.from({length:19},(function(){return 0}))})),curPlayer:1,history:new Array,winner:0,winningTracks:new Set},h=r(3),j=r.n(h),f=[[j.a.LeftTopCorner,j.a.TopEdge,j.a.RightTopCorner],[j.a.LeftEdge,j.a.InBoard,j.a.RightEdge],[j.a.LeftBottomCorner,j.a.BottomEdge,j.a.RightBottomCorner]];var y=function(e){var t=e.keyPos.split(",").map((function(e){return parseInt(e)})),r=Object(s.a)(t,2),n=r[0],a=r[1],o=0===n?0:18===n?2:1,c=0===a?0:18===a?2:1,u=Object(l.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return{who:e.tiles[n][a],available:"GAME"===e.mode&&0===e.winner&&0===e.tiles[n][a],winningTracked:e.winningTracks.has("[".concat(n,",").concat(a,"]"))}})),h=0!==u.who?1===u.who?j.a.Player1:j.a.Player2:j.a.Player0,y=f[o][c],m=u.winningTracked?j.a.TrackedResult:"";return Object(i.jsx)("button",{className:"".concat(j.a.BoardButton," ").concat(h," ").concat(y," ").concat(m),id:e.keyPos,disabled:!u.available,children:0!==u.who?e.theme[u.who-1]:"\ud83d\udd34"},e.keyPos)},m=r(10),b=r.n(m);var p=function(e){var t=Object(l.b)();return Object(i.jsx)("div",{className:b.a.Board,onClick:function(e){var r=e.target.id.split(",").map((function(e){return parseInt(e)})),n=Object(s.a)(r,2),a=n[0],o=n[1];Number.isNaN(a)||Number.isNaN(o)||t({type:"PUT",payload:[a,o]})},children:Object(i.jsx)("div",{className:b.a.Tiles,children:Array.from({length:19},(function(){return Array.from({length:19})})).map((function(t,r){return t.map((function(t,n){return Object(i.jsx)(y,{keyPos:"".concat(r,",").concat(n),theme:e.themeButtons},"r".concat(r,"c").concat(n))}))}))})})},O=r(7),g=r.n(O),v=r(4),B=r(12),T={player1PutSFX:document.querySelector("#player1PutSFX"),player2PutSFX:document.querySelector("#player2PutSFX"),resetSFX:document.querySelector("#resetSFX"),undoSFX:document.querySelector("#undoSFX"),resultSFX:document.querySelector("#resultSFX")};function _(e){e.pause(),e.currentTime=0}function k(e){_(T.player1PutSFX),_(T.player2PutSFX),_(T.undoSFX),_(T.resetSFX),_(T.resultSFX),e.play()}function x(e){switch(e){case"P1PUT":k(T.player1PutSFX);break;case"P2PUT":k(T.player2PutSFX);break;case"UNDO":k(T.undoSFX);break;case"RESET":k(T.resetSFX);break;case"RESULT":k(T.resultSFX)}}function w(e,t){return!(e<0||e>18||t<0||t>18)}function S(e,t,r,n){var a=Array.from({length:19},(function(t,r){return Array.from(e.tiles[r])}));return a[t][r]=n,a}function P(e){switch(e){case 1:return 2;case 2:return 1;default:return 0}}function E(e,t,r){if(0!==e.tiles[t][r])return e;var n=S(e,t,r,e.curPlayer),a=P(e.curPlayer),o=function(e,t,r){for(var n=r[e][t],a=[[1,0],[0,1],[1,1],[1,-1]],o=0;o<a.length;o++){for(var c=Object(s.a)(a[o],2),i=c[0],u=c[1],l=[[e,t]],d=e+i,h=t+u;w(d,h)&&r[d][h]===n;)l.push([d,h]),d+=i,h+=u;for(d=e-i,h=t-u;w(d,h)&&r[d][h]===n;)l.push([d,h]),d-=i,h-=u;if(5===l.length)return[n,l]}return[0,[]]}(t,r,n),c=Object(s.a)(o,2),i=c[0],u=c[1],l=Array.from(e.history);return l.push([t,r]),x(0!==i?"RESULT":"P".concat(e.curPlayer,"PUT")),Object(v.a)(Object(v.a)({},e),{},{tiles:n,curPlayer:a,history:l,winner:i,winningTracks:new Set(u.map((function(e){return"[".concat(e[0],",").concat(e[1],"]")})))})}function R(e){if(0===e.history.length)return e;var t=Array.from(e.history),r=t.pop();if(void 0===r)return e;var n=Object(s.a)(r,2),a=n[0],o=n[1];if(!w(a,o))return e;var c=S(e,a,o,0),i=P(e.curPlayer);return x("UNDO"),Object(v.a)(Object(v.a)({},e),{},{tiles:c,curPlayer:i,history:t,winner:0,winningTracks:new Set})}function C(e){return"GAME"===e.mode&&x("RESET"),Object(v.a)(Object(v.a)({},e),{},{tiles:Array.from({length:19},(function(){return Array.from({length:19},(function(){return 0}))})),curPlayer:1,history:Array(),winner:0,winningTracks:new Set})}function A(e){switch(e){case"GAME":case"REPLAY":return!0;default:return!1}}var F=Object(B.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT":return E(e,t.payload[0],t.payload[1]);case"UNDO":return R(e);case"RESET":return C(e);case"MODECHANGE":return Object(v.a)(Object(v.a)({},C(e)),{},{mode:A(t.payload)?t.payload:e.mode});default:return e}}));var N=function(){var e=Object(l.b)();return Object(i.jsxs)("div",{className:g.a.Bottom,children:[Object(i.jsx)("button",{onClick:function(){e({type:"UNDO"})},children:"Undo"}),Object(i.jsx)("button",{onClick:function(){e({type:"RESET"})},children:"Reset"}),Object(i.jsx)("button",{onClick:function(){var e={width:19,height:19,history:F.getState().history},t=document.createElement("a"),r=new Blob([JSON.stringify(e)],{type:"json"});t.href=URL.createObjectURL(r),t.download="replay.json",t.click()},children:"Save As Replay"})]})};var X=function(){var e=Object(l.b)(),t=Object(n.useState)({history:Array(),curTrack:0,maxTrack:0}),r=Object(s.a)(t,2),a=r[0],o=r[1];return Object(i.jsxs)("div",{className:"Bottom",children:[Object(i.jsx)("label",{children:"Replay File: "}),Object(i.jsx)("input",{type:"file",accept:"application/json",onChange:function(t){t.target.files&&function(t){if(!(t.length<=0)){var r=new FileReader;r.addEventListener("load",(function(){var t=JSON.parse(r.result);19===t.width&&19===t.height&&null!==t.history&&void 0!==t.history&&(e({type:"RESET"}),o({history:t.history,curTrack:0,maxTrack:t.history.length}))})),r.readAsText(t[0])}}(t.target.files)}}),Object(i.jsx)("button",{onClick:function(){a.curTrack<=0||(e({type:"UNDO"}),o({history:a.history,curTrack:a.curTrack-1,maxTrack:a.history.length}))},children:"Prev"}),"".concat(a.curTrack," / ").concat(a.maxTrack),Object(i.jsx)("button",{onClick:function(){a.curTrack>=a.maxTrack||(e({type:"PUT",payload:a.history[a.curTrack]}),o({history:a.history,curTrack:a.curTrack+1,maxTrack:a.history.length}))},children:"Next"})]})};var L=function(){var e=Object(l.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return{mode:e.mode}}));return Object(i.jsx)("div",{className:g.a.Bottom,children:function(){switch(e.mode){case"GAME":return Object(i.jsx)(N,{});case"REPLAY":return Object(i.jsx)(X,{});default:return Object(i.jsx)("div",{children:"Invalid mode"})}}()})};var U=function(){var e=Object(l.b)();return Object(i.jsxs)("div",{className:"ModeChanger",onChange:function(t){e({type:"MODECHANGE",payload:t.target.value})},children:[Object(i.jsx)("input",{type:"radio",id:"game",name:"mode",value:"GAME",defaultChecked:!0}),Object(i.jsx)("label",{children:"Game"}),Object(i.jsx)("input",{type:"radio",id:"replay",name:"mode",value:"REPLAY"}),Object(i.jsx)("label",{children:"Replay"})]})};var G=function(){var e=Object(l.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return{winner:e.winner,mode:e.mode}}));return"GAME"===e.mode&&0!==e.winner?Object(i.jsx)("div",{className:"WinnerEffect",children:Object(i.jsx)("div",{className:"WinnerEffectContent",children:Object(i.jsxs)("span",{children:["Player ",e.winner," Wins!"]})})}):Object(i.jsx)("div",{})},M={default:["\u26ab","\u26aa"],halloween:["\ud83d\udfe4","\ud83d\udfe0"],winter:["\ud83d\udd34","\ud83d\udfe2"]},I={default:"React Gomoku",halloween:"Halloween Gomoku",winter:"Holiday Gomoku"},D=function(){var e=new Date,t=e.getDate(),r=e.getMonth();return 9===r&&31===t?"halloween":0===r&&1===t||11===r&&25===t?"winter":"default"}();var q=function(){return Object(i.jsxs)("main",{className:"Main",children:[Object(i.jsx)(u,{title:I[D]}),Object(i.jsx)(U,{}),Object(i.jsx)(p,{themeButtons:M[D]}),Object(i.jsx)(L,{}),Object(i.jsx)(G,{})]})};var H=function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsx)(q,{})})},Y=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,27)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),o(e),c(e)}))};c.a.render(Object(i.jsx)(l.a,{store:F,children:Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(H,{})})}),document.getElementById("root")),Y()},3:function(e,t,r){e.exports={BoardButton:"BoardButton_BoardButton__2YGCI",Player0:"BoardButton_Player0__2NSob",Player1:"BoardButton_Player1__1XAS6",Player2:"BoardButton_Player2__qXutw",LeftTopCorner:"BoardButton_LeftTopCorner__2minL",RightTopCorner:"BoardButton_RightTopCorner__3qdAy",LeftBottomCorner:"BoardButton_LeftBottomCorner__1feHF",RightBottomCorner:"BoardButton_RightBottomCorner__2mICm",LeftEdge:"BoardButton_LeftEdge__3G5n6",RightEdge:"BoardButton_RightEdge__1kWCK",TopEdge:"BoardButton_TopEdge__2cyOm",BottomEdge:"BoardButton_BottomEdge__3sBQI",InBoard:"BoardButton_InBoard__oUbcb",TrackedResult:"BoardButton_TrackedResult__38tq2",FlashTrackedResult:"BoardButton_FlashTrackedResult__va6Sj"}},7:function(e,t,r){e.exports={Bottom:"Bottom_Bottom__2XzBw"}}},[[26,1,2]]]);
//# sourceMappingURL=main.63d48bb5.chunk.js.map