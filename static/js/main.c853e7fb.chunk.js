(this["webpackJsonpreact-gomoku"]=this["webpackJsonpreact-gomoku"]||[]).push([[0],{10:function(e,t,r){e.exports={Board:"Board_Board__3vYMo",Tiles:"Board_Tiles__1R0S7"}},13:function(e,t,r){e.exports={Score:"Score_Score__2CIBq"}},18:function(e,t,r){},19:function(e,t,r){},27:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(6),c=r.n(o),i=(r(18),r(19),r(1));var u=function(e){return Object(i.jsx)("div",{className:"Title",children:e.title})},s=r(5),l=r(2),d={mode:"GAME",tiles:Array.from({length:19},(function(){return Array.from({length:19},(function(){return 0}))})),curPlayer:1,history:new Array,winner:0,winningTracks:new Set,score:[0,0]},f=function(){var e=new Date,t=e.getDate(),r=e.getMonth();return 9===r&&31===t?"halloween":0===r&&1===t||11===r&&25===t?"winter":"default"}(),h={default:["\u26ab","\u26aa"],halloween:["\ud83d\udfe3","\ud83d\udfe0"],winter:["\ud83d\udd34","\ud83d\udfe2"]}[f],j={default:"React Gomoku",halloween:"Halloween Gomoku",winter:"Holiday Gomoku"}[f],y=r(3),b=r.n(y),m=[[b.a.LeftTopCorner,b.a.TopEdge,b.a.RightTopCorner],[b.a.LeftEdge,b.a.InBoard,b.a.RightEdge],[b.a.LeftBottomCorner,b.a.BottomEdge,b.a.RightBottomCorner]];var p=function(e){var t=e.keyPos.split(",").map((function(e){return parseInt(e)})),r=Object(s.a)(t,2),n=r[0],a=r[1],o=0===n?0:18===n?2:1,c=0===a?0:18===a?2:1,u=Object(l.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return{who:e.tiles[n][a],available:"GAME"===e.mode&&0===e.winner&&0===e.tiles[n][a],winningTracked:e.winningTracks.has("[".concat(n,",").concat(a,"]"))}})),f=0!==u.who?1===u.who?b.a.Player1:b.a.Player2:b.a.Player0,j=m[o][c],y=u.winningTracked?b.a.TrackedResult:"";return Object(i.jsx)("button",{className:"".concat(b.a.BoardButton," ").concat(f," ").concat(j," ").concat(y),id:e.keyPos,disabled:!u.available,children:0!==u.who?h[u.who-1]:"\ud83d\udd34"},e.keyPos)},O=r(10),v=r.n(O);var g=function(){var e=Object(l.b)();return Object(i.jsx)("div",{className:v.a.Board,onClick:function(t){var r=t.target.id.split(",").map((function(e){return parseInt(e)})),n=Object(s.a)(r,2),a=n[0],o=n[1];Number.isNaN(a)||Number.isNaN(o)||e({type:"PUT",payload:[a,o]})},children:Object(i.jsx)("div",{className:v.a.Tiles,children:Array.from({length:19},(function(){return Array.from({length:19})})).map((function(e,t){return e.map((function(e,r){return Object(i.jsx)(p,{keyPos:"".concat(t,",").concat(r)},"r".concat(t,"c").concat(r))}))}))})})},B=r(7),T=r.n(B),S=r(4),_=r(12),k={player1PutSFX:document.querySelector("#player1PutSFX"),player2PutSFX:document.querySelector("#player2PutSFX"),resetSFX:document.querySelector("#resetSFX"),undoSFX:document.querySelector("#undoSFX"),resultSFX:document.querySelector("#resultSFX")};function x(e){e.pause(),e.currentTime=0}function w(e){x(k.player1PutSFX),x(k.player2PutSFX),x(k.undoSFX),x(k.resetSFX),x(k.resultSFX),e.play()}function E(e){switch(e){case"P1PUT":w(k.player1PutSFX);break;case"P2PUT":w(k.player2PutSFX);break;case"UNDO":w(k.undoSFX);break;case"RESET":w(k.resetSFX);break;case"RESULT":w(k.resultSFX)}}function P(e,t){return!(e<0||e>18||t<0||t>18)}function R(e,t,r,n){var a=Array.from({length:19},(function(t,r){return Array.from(e.tiles[r])}));return a[t][r]=n,a}function C(e){switch(e){case 1:return 2;case 2:return 1;default:return 0}}function A(e,t,r){if(0!==e.tiles[t][r])return e;var n=R(e,t,r,e.curPlayer),a=C(e.curPlayer),o=function(e,t,r){for(var n=r[e][t],a=[[1,0],[0,1],[1,1],[1,-1]],o=0;o<a.length;o++){for(var c=Object(s.a)(a[o],2),i=c[0],u=c[1],l=[[e,t]],d=e+i,f=t+u;P(d,f)&&r[d][f]===n;)l.push([d,f]),d+=i,f+=u;for(d=e-i,f=t-u;P(d,f)&&r[d][f]===n;)l.push([d,f]),d-=i,f-=u;if(5===l.length)return[n,l]}return[0,[]]}(t,r,n),c=Object(s.a)(o,2),i=c[0],u=c[1],l=Array.from(e.history);l.push([t,r]);var d=Array.from(e.score);return 0!==i?(E("RESULT"),"GAME"===e.mode&&d[i-1]++):E("P".concat(e.curPlayer,"PUT")),Object(S.a)(Object(S.a)({},e),{},{tiles:n,curPlayer:a,history:l,winner:i,winningTracks:new Set(u.map((function(e){return"[".concat(e[0],",").concat(e[1],"]")}))),score:d})}function N(e){if(0===e.history.length)return e;var t=Array.from(e.history),r=t.pop();if(void 0===r)return e;var n=Object(s.a)(r,2),a=n[0],o=n[1];if(!P(a,o))return e;var c=R(e,a,o,0),i=C(e.curPlayer);return E("UNDO"),Object(S.a)(Object(S.a)({},e),{},{tiles:c,curPlayer:i,history:t,winner:0,winningTracks:new Set})}function F(e){return E("RESET"),Object(S.a)(Object(S.a)({},e),{},{tiles:Array.from({length:19},(function(){return Array.from({length:19},(function(){return 0}))})),curPlayer:1,history:Array(),winner:0,winningTracks:new Set})}function X(e){switch(e){case"GAME":case"REPLAY":return!0;default:return!1}}var L=Object(_.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUT":return A(e,t.payload[0],t.payload[1]);case"UNDO":return N(e);case"RESET":return F(e);case"MODECHANGE":return Object(S.a)(Object(S.a)({},F(e)),{},{mode:X(t.payload)?t.payload:e.mode});default:return e}})),G=r(13),U=r.n(G);var M=function(){var e=Object(l.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return{p1Score:e.score[0],p2Score:e.score[1]}}));return Object(n.useEffect)((function(){document.title="React Gomoku :: ".concat(e.p1Score," - ").concat(e.p2Score)})),Object(i.jsx)("div",{className:U.a.Score,children:Object(i.jsxs)("span",{children:[e.p1Score," - ",e.p2Score]})})};var I=function(){var e=Object(l.b)();return Object(i.jsxs)("div",{className:T.a.Bottom,children:[Object(i.jsx)(M,{}),Object(i.jsx)("button",{onClick:function(){e({type:"UNDO"})},children:"Undo"}),Object(i.jsx)("button",{onClick:function(){e({type:"RESET"})},children:"Reset"}),Object(i.jsx)("button",{onClick:function(){var e={width:19,height:19,history:L.getState().history},t=document.createElement("a"),r=new Blob([JSON.stringify(e)],{type:"json"});t.href=URL.createObjectURL(r),t.download="replay.json",t.click()},children:"Save As Replay"})]})};var D=function(){var e=Object(l.b)(),t=Object(n.useState)({history:Array(),curTrack:0,maxTrack:0}),r=Object(s.a)(t,2),a=r[0],o=r[1];return Object(n.useEffect)((function(){document.title="React Gomoku :: Replay Mode - ".concat(a.curTrack," / ").concat(a.maxTrack)})),Object(i.jsxs)("div",{className:"Bottom",children:[Object(i.jsx)("label",{children:"Replay File: "}),Object(i.jsx)("input",{type:"file",accept:"application/json",onChange:function(t){t.target.files&&function(t){if(!(t.length<=0)){var r=new FileReader;r.addEventListener("load",(function(){var t=JSON.parse(r.result);19===t.width&&19===t.height&&null!==t.history&&void 0!==t.history&&(e({type:"RESET"}),o({history:t.history,curTrack:0,maxTrack:t.history.length}))})),r.readAsText(t[0])}}(t.target.files)}}),Object(i.jsx)("button",{onClick:function(){a.curTrack<=0||(e({type:"UNDO"}),o({history:a.history,curTrack:a.curTrack-1,maxTrack:a.history.length}))},children:"Prev"}),"".concat(a.curTrack," / ").concat(a.maxTrack),Object(i.jsx)("button",{onClick:function(){a.curTrack>=a.maxTrack||(e({type:"PUT",payload:a.history[a.curTrack]}),o({history:a.history,curTrack:a.curTrack+1,maxTrack:a.history.length}))},children:"Next"})]})};var q=function(){var e=Object(l.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return{mode:e.mode}}));return Object(i.jsx)("div",{className:T.a.Bottom,children:function(){switch(e.mode){case"GAME":return Object(i.jsx)(I,{});case"REPLAY":return Object(i.jsx)(D,{});default:return Object(i.jsx)("div",{children:"Invalid mode"})}}()})};var H=function(){var e=Object(l.b)();return Object(i.jsxs)("div",{className:"ModeChanger",onChange:function(t){e({type:"MODECHANGE",payload:t.target.value})},children:[Object(i.jsx)("input",{type:"radio",id:"game",name:"mode",value:"GAME",defaultChecked:!0}),Object(i.jsx)("label",{children:"Game"}),Object(i.jsx)("input",{type:"radio",id:"replay",name:"mode",value:"REPLAY"}),Object(i.jsx)("label",{children:"Replay"})]})};var Y=function(){var e=Object(l.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return{winner:e.winner,mode:e.mode}}));return"GAME"===e.mode&&0!==e.winner?Object(i.jsx)("div",{className:"WinnerEffect",children:Object(i.jsx)("div",{className:"WinnerEffectContent",children:Object(i.jsxs)("span",{children:["Player ",e.winner," Wins!"]})})}):Object(i.jsx)("div",{})};var J=function(){return Object(i.jsxs)("main",{className:"Main",children:[Object(i.jsx)(u,{title:j}),Object(i.jsx)(H,{}),Object(i.jsx)(g,{}),Object(i.jsx)(q,{}),Object(i.jsx)(Y,{})]})};var W=function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsx)(J,{})})},z=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,28)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),o(e),c(e)}))};c.a.render(Object(i.jsx)(l.a,{store:L,children:Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(W,{})})}),document.getElementById("root")),z()},3:function(e,t,r){e.exports={BoardButton:"BoardButton_BoardButton__2YGCI",Player0:"BoardButton_Player0__2NSob",Player1:"BoardButton_Player1__1XAS6",Player2:"BoardButton_Player2__qXutw",LeftTopCorner:"BoardButton_LeftTopCorner__2minL",RightTopCorner:"BoardButton_RightTopCorner__3qdAy",LeftBottomCorner:"BoardButton_LeftBottomCorner__1feHF",RightBottomCorner:"BoardButton_RightBottomCorner__2mICm",LeftEdge:"BoardButton_LeftEdge__3G5n6",RightEdge:"BoardButton_RightEdge__1kWCK",TopEdge:"BoardButton_TopEdge__2cyOm",BottomEdge:"BoardButton_BottomEdge__3sBQI",InBoard:"BoardButton_InBoard__oUbcb",TrackedResult:"BoardButton_TrackedResult__38tq2",FlashTrackedResult:"BoardButton_FlashTrackedResult__va6Sj"}},7:function(e,t,r){e.exports={Bottom:"Bottom_Bottom__2XzBw"}}},[[27,1,2]]]);
//# sourceMappingURL=main.c853e7fb.chunk.js.map